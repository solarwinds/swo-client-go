query getAlertDefinitionById($id: ID!) {
  alertQueries {
    alertDefinitions(filter: { id: $id }) {
      alertDefinitions {
        actions {
          configurationIds
          type
          receivingType
          includeDetails
          resendIntervalSeconds
        }
        triggerResetActions
        conditionType
        flatCondition {
          id
          links {
            name
            values
          }
          value {
            dataType
            entityFilter {
              fields {
                fieldName
                rules {
                  negate
                  type
                  value
                }
              }
              ids
              types
              query
            }
            groupByMetricTag
            values
            fieldName
            metricFilter {
              id
              links {
                name
                values
              }
              value {
                operation
                propertyName
                propertyValue
                propertyValues
              }
            }
            operator
            type
            value
            namespace
            query
          }
        }
        description
        enabled
        id
        name
        organizationId
        runbookLink
        severity
        triggered
        triggeredTime
        triggerDelaySeconds
        noDataResetSeconds
        templateId
        targetEntityTypes
        muteInfo {
          muted
          until
        }
        user {
          id
        }
        createdAt
      }
    }
  }
}

mutation createAlertDefinitionMutation($definition: AlertDefinitionInput!) {
  alertMutations {
    createAlertDefinition(definition: $definition) {
      actions {
        configurationIds
        type
        receivingType
        includeDetails
        resendIntervalSeconds
      }
      flatCondition {
        id
      }
      description
      enabled
      id
      name
      organizationId
      runbookLink
      severity
      triggerResetActions
      triggerDelaySeconds
      noDataResetSeconds
      templateId
      conditionType
      conditionUpdatedAt
    }
  }
}

mutation updateAlertDefinitionMutation(
  $definition: AlertDefinitionInput!
  $updateAlertDefinitionId: ID!
) {
  alertMutations {
    updateAlertDefinition(
      definition: $definition
      id: $updateAlertDefinitionId
    ) {
      actions {
        configurationIds
        type
        receivingType
        includeDetails
        resendIntervalSeconds
      }
      triggerResetActions
      conditionType
      flatCondition {
        id
        links {
          name
          values
        }
        value {
          fieldName
          operator
          type
          query
        }
      }
      description
      enabled
      id
      name
      organizationId
      severity
      triggered
      triggeredTime
      triggerDelaySeconds
      noDataResetSeconds
      templateId
      targetEntityTypes
      muteInfo {
        muted
        until
      }
      userId
      runbookLink
    }
  }
}

mutation deleteAlertDefinitionMutation($deleteAlertDefinitionId: ID!) {
  alertMutations {
    deleteAlertDefinition(id: $deleteAlertDefinitionId)
  }
}
